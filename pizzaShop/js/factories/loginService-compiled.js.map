{"version":3,"sources":["loginService.js"],"names":[],"mappings":"AAAA,IAAI,OAAJ,CAAY,cAAZ,EAA4B,UAAU,UAAV,EAAsB,KAAtB,EAA6B,MAA7B,EAAqC;;AAE7D,QAAI,mBAAmB,EAAvB;AACA,eAAW,OAAX,GAAqB,KAArB;AACA,eAAW,cAAX,GAA4B,KAA5B;AACA,eAAW,KAAX;;AAEA,WAAO;;AAEH,eAAO,UAAU,IAAV,EAAgB,QAAhB,EAA0B;;AAE7B;;AAEA,kBAAM;AACF,wBAAQ,KADN;AAEF,qBAAK;AAFH,aAAN,EAGG,IAHH,CAGQ,SAAS,eAAT,CAAyB,QAAzB,EAAmC;AACvC,mCAAmB,SAAS,IAA5B;AACA,qBAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,iBAAiB,MAArC,EAA6C,KAAK,CAAlD,EAAqD;AACjD,wBAAI,iBAAiB,CAAjB,EAAoB,cAApB,CAAmC,MAAnC,KAA8C,iBAAiB,CAAjB,EAAoB,IAApB,KAA6B,IAA3E,IACA,iBAAiB,CAAjB,EAAoB,cAApB,CAAmC,UAAnC,CADA,IACkD,iBAAiB,CAAjB,EAAoB,QAApB,KAAiC,QADvF,EACiG;AAC7F,mCAAW,cAAX,GAA4B,IAA5B;AACA,mCAAW,KAAX,GAAmB,CAAnB;AACH;AACJ;AACD,oBAAI,WAAW,cAAf,EAA+B;AAC3B,2BAAO,EAAP,CAAU,SAAV;AACA,+BAAW,OAAX,GAAqB,IAArB;AACA,iCAAa,OAAb,CAAqB,aAArB,EAAoC,IAApC;AACH,iBAJD,MAIO;AACH,0BAAM,+BAAN;AACH;AACJ,aAnBD,EAmBG,SAAS,aAAT,CAAuB,QAAvB,EAAiC;AAChC,wBAAQ,GAAR,CAAY,QAAZ;AACH,aArBD;AAsBH,SA5BE;;AA8BH,gBAAQ,UAAU,IAAV,EAAgB,KAAhB,EAAuB,KAAvB,EAA8B,IAA9B,EAAoC,MAApC,EAA4C,KAA5C,EAAmD,SAAnD,EAA8D,MAA9D,EAAsE,KAAtE,EAA6E,QAA7E,EAAuF;;AAE3F,kBAAM;AACF,wBAAQ,MADN;AAEF,qBAAK,qHAFH;AAGF,sBAAM,CAAC;AACH,0BAAM,IADH;AAEH,2BAAO,KAFJ;AAGH,2BAAO,KAHJ;AAIH,0BAAM,IAJH;AAKH,4BAAQ,MALL;AAMH,2BAAO,KANJ;AAOH,+BAAW,SAPR;AAQH,4BAAQ,MARL;AASH,2BAAO,KATJ;AAUH,8BAAU;AAVP,iBAAD;AAHJ,aAAN,EAeG,IAfH,CAeQ,SAAS,eAAT,CAAyB,QAAzB,EAAmC;AACvC,2BAAW,OAAX,GAAqB,IAArB;AACH,aAjBD,EAiBG,SAAS,aAAT,CAAuB,QAAvB,EAAiC,CACnC,CAlBD;AAmBH,SAnDE;;AAqDH,kBAAU,YAAY;;AAElB,mBAAO,MAAM;AACT,wBAAQ,KADC;AAET,qBAAK;AAFI,aAAN,CAAP;AAIH;AA3DE,KAAP;AA6DH,CApED","file":"loginService-compiled.js","sourcesContent":["app.factory('loginService', function ($rootScope, $http, $state) {\r\n\r\n    var registered_users = [];\r\n    $rootScope.isLogin = false;\r\n    $rootScope.isRegistration = false;\r\n    $rootScope.index;\r\n\r\n    return {\r\n\r\n        login: function (name, password) {\r\n\r\n            /*var self = this;*/\r\n\r\n            $http({\r\n                method: 'GET',\r\n                url: 'https://api.mlab.com/api/1/databases/pizzashop/collections/registered_users?apiKey=9BGZZA0zukVJrmfAYnnLeG7V2DiUQNY_'\r\n            }).then(function successCallback(response) {\r\n                registered_users = response.data;\r\n                for (var i = 0; i < registered_users.length; i += 1) {\r\n                    if (registered_users[i].hasOwnProperty('name') && registered_users[i].name === name &&\r\n                        registered_users[i].hasOwnProperty('password') && registered_users[i].password === password) {\r\n                        $rootScope.isRegistration = true;\r\n                        $rootScope.index = i;\r\n                    }\r\n                }\r\n                if ($rootScope.isRegistration) {\r\n                    $state.go('/orders');\r\n                    $rootScope.isLogin = true;\r\n                    localStorage.setItem('currentUser', name);\r\n                } else {\r\n                    alert('Invalid username or password!');\r\n                }\r\n            }, function errorCallback(response) {\r\n                console.log('Erorr!');\r\n            });\r\n        },\r\n\r\n        signup: function (name, email, phone, city, street, house, apartment, access, floor, password) {\r\n\r\n            $http({\r\n                method: 'POST',\r\n                url: 'https://api.mlab.com/api/1/databases/pizzashop/collections/registered_users?apiKey=9BGZZA0zukVJrmfAYnnLeG7V2DiUQNY_',\r\n                data: [{\r\n                    name: name,\r\n                    email: email,\r\n                    phone: phone,\r\n                    city: city,\r\n                    street: street,\r\n                    house: house,\r\n                    apartment: apartment,\r\n                    access: access,\r\n                    floor: floor,\r\n                    password: password\r\n                }]\r\n            }).then(function successCallback(response) {\r\n                $rootScope.isLogin = true;\r\n            }, function errorCallback(response) {\r\n            });\r\n        },\r\n\r\n        getUsers: function () {\r\n\r\n            return $http({\r\n                method: 'GET',\r\n                url: 'https://api.mlab.com/api/1/databases/pizzashop/collections/registered_users?apiKey=9BGZZA0zukVJrmfAYnnLeG7V2DiUQNY_'\r\n            });\r\n        }\r\n    }\r\n});"]}