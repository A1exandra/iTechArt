{"version":3,"sources":["mainCtrl.js"],"names":[],"mappings":"AAAA,IAAI,UAAJ,CAAe,UAAf,EAA2B,UAAU,UAAV,EAAsB,MAAtB,EAA8B,MAA9B,EAAsC,KAAtC,EAA6C,SAA7C,EAAwD,YAAxD,EAAsE;;AAE7F,eAAW,OAAX,GAAqB,aAAa,OAAlC;;AAEA,WAAO,IAAP,GAAc,aAAa,OAAb,CAAqB,aAArB,CAAd;;AAEA,WAAO,QAAP,GAAkB,UAAU,IAAV,EAAgB;AAC9B,eAAQ,UAAU,IAAV,OAAqB,IAAtB,GAA8B,QAA9B,GAAyC,EAAhD;AACH,KAFD;;AAIA,WAAO,MAAP,GAAgB,YAAY;AACxB,mBAAW,OAAX,GAAqB,aAAa,OAAb,GAAuB,KAA5C;AACA,qBAAa,UAAb,CAAwB,aAAxB;AACA,eAAO,EAAP,CAAU,QAAV;AACH,KAJD;;AAMA,eAAW,GAAX,CAAe,mBAAf,EAAoC,UAAU,KAAV,EAAiB,OAAjB,EAA0B,QAA1B,EAAoC,SAApC,EAA+C,UAA/C,EAA2D;AAC3F,YAAI,UAAU,IAAV,IAAkB,GAAlB,IAAyB,QAAQ,IAAR,IAAgB,QAA7C,EAAuD;AACnD,kBAAM,+BAAN;AACA,kBAAM,cAAN;AACH;AACJ,KALD;;AAQA,eAAW,GAAX,CAAe,qBAAf,EAAsC,UAAS,KAAT,EAAgB,OAAhB,EAAyB,QAAzB,EAAmC,SAAnC,EAA8C,UAA9C,EAA0D,OAA1D,EAAmE;;AAErG,cAAM,gBAAN;;AAEA,YAAI,cAAc,aAAa,OAAb,CAAqB,aAArB,CAAlB;;AAEA,YAAG,CAAC,WAAD,IAAgB,CAAC,SAAD,EAAY,OAAZ,CAAoB,QAAQ,GAA5B,KAAoC,CAAvD,EAA0D;AACtD,mBAAO,EAAP,CAAU,QAAV;AACH,SARoG,CAQnG;;;;AAIF,YAAG,WAAH,EAAgB;AACZ,uBAAW,OAAX,GAAqB,IAArB;AACH;AACJ,KAfD;;AAiBA;;;AAKH,CA9CD","file":"mainCtrl-compiled.js","sourcesContent":["app.controller('MainCtrl', function ($rootScope, $scope, $state, $http, $location, loginService) {\r\n\r\n    $rootScope.isLogin = loginService.isLogin;\r\n\r\n    $scope.name = localStorage.getItem('currentUser');\r\n\r\n    $scope.getClass = function (path) {\r\n        return ($location.path() === path) ? 'active' : '';\r\n    };\r\n\r\n    $scope.logout = function () {\r\n        $rootScope.isLogin = loginService.isLogin = false;\r\n        localStorage.removeItem('currentUser');\r\n        $state.go('/login');\r\n    };\r\n\r\n    $rootScope.$on('$stateChangeStart', function (event, toState, toParams, fromState, fromParams) {\r\n        if (fromState.name == '/' && toState.name == '/about') {\r\n            alert('Can\\'t go from home to about!');\r\n            event.preventDefault();\r\n        }\r\n    });\r\n\r\n\r\n    $rootScope.$on('$stateChangeSuccess', function(event, toState, toParams, fromState, fromParams, options) {\r\n\r\n        alert('State changed!');\r\n\r\n        var currentUser = localStorage.getItem('currentUser');\r\n\r\n        if(!currentUser && ['/orders'].indexOf(toState.url) >= 0) {\r\n            $state.go('/login');\r\n        } /*else if(['/login'].indexOf(toState.url) >= 0) {\r\n            $state.go('/');\r\n        }*/\r\n\r\n        if(currentUser) {\r\n            $rootScope.isLogin = true;\r\n        }\r\n    });\r\n\r\n    /*$rootScope.$on('$stateChangeError', function(event, toState, toParams, fromState, fromParams, error) {\r\n\r\n        $state.go('/error');\r\n\r\n    });*/\r\n});"]}